

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>bob_flux2.flux2_node &mdash; Bob&#39;s Handbuch 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=9edc463e" />
      <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="../../../_static/custom.css?v=0603aa02" />

  
    <link rel="shortcut icon" href="../../../_static/profile_image-300x300.png"/>
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=2709fde1"></script>
      <script src="../../../_static/doctools.js?v=fd6eb6e6"></script>
      <script src="../../../_static/sphinx_highlight.js?v=6ffebe34"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="bob_flux2k" href="../../bob_flux2k/index.html" />
    <link rel="prev" title="bob_flux2" href="../index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            Bob's Handbuch
              <img src="../../../_static/bob_vv.gif" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Packages</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../bob/bob-coquitts.html">ROS Package bob_coquitts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bob/bob-flux2.html">ROS Package bob_flux2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bob/bob-flux2k.html">ROS Package bob_flux2k</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bob/bob-launch.html">ROS Package bob_launch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bob/bob-llm.html">ROS Package bob_llm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bob/bob-moondream.html">ROS Package bob_moondream</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bob/bob-moondream-msgs.html">ROS Package bob_moondream_msgs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bob/bob-msgs.html">ROS Package bob_msgs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bob/bob-sd35.html">ROS Package bob_sd35</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bob/bob-topic-tools.html">ROS Package bob_topic_tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bob/bob-vector-db.html">ROS Package bob_vector_db</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bob/voskros.html">ROS Package VoskRos</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">OTHER</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../bob/vox.html">Package VOX Real-time Transcription</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../vox/index.html">vox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../bob_llm/index.html">bob_llm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../bob_sd35/index.html">bob_sd35</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">bob_flux2</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../index.html#submodules">Submodules</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">bob_flux2.flux2_node</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../bob_flux2k/index.html">bob_flux2k</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../bob_coquitts/index.html">bob_coquitts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../bob_moondream/index.html">bob_moondream</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../bob_vector_db/index.html">bob_vector_db</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../bob_topic_tools/index.html">bob_topic_tools</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Bob's Handbuch</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">API Reference</a></li>
          <li class="breadcrumb-item"><a href="../index.html">bob_flux2</a></li>
      <li class="breadcrumb-item active">bob_flux2.flux2_node</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/autoapi/bob_flux2/flux2_node/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-bob_flux2.flux2_node">
<span id="bob-flux2-flux2-node"></span><h1>bob_flux2.flux2_node<a class="headerlink" href="#module-bob_flux2.flux2_node" title="Link to this heading"></a></h1>
<section id="classes">
<h2>Classes<a class="headerlink" href="#classes" title="Link to this heading"></a></h2>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#bob_flux2.flux2_node.TTInode" title="bob_flux2.flux2_node.TTInode"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TTInode</span></code></a></p></td>
<td><p>A ROS node that interfaces with a FLUX.2 model for text-to-image generation.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Link to this heading"></a></h2>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#bob_flux2.flux2_node.main" title="bob_flux2.flux2_node.main"><code class="xref py py-obj docutils literal notranslate"><span class="pre">main</span></code></a>([args])</p></td>
<td><p>The main entry point for the ROS node.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="module-contents">
<h2>Module Contents<a class="headerlink" href="#module-contents" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="bob_flux2.flux2_node.TTInode">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">bob_flux2.flux2_node.</span></span><span class="sig-name descname"><span class="pre">TTInode</span></span><a class="headerlink" href="#bob_flux2.flux2_node.TTInode" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-obj docutils literal notranslate"><span class="pre">rclpy.node.Node</span></code></p>
<p>A ROS node that interfaces with a FLUX.2 model for text-to-image generation.</p>
<p>This node manages the entire text-to-image pipeline. It is optimized for
low-VRAM environments by sequentially loading and unloading the text encoder
and the image generation models for each request, ensuring they are never
in memory simultaneously. It can be configured to run once for an initial
prompt or continuously listen for prompts on a topic. It also supports
an optional input image to guide the generation process.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="bob_flux2.flux2_node.TTInode.bridge">
<span class="sig-name descname"><span class="pre">bridge</span></span><a class="headerlink" href="#bob_flux2.flux2_node.TTInode.bridge" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bob_flux2.flux2_node.TTInode.repo_id">
<span class="sig-name descname"><span class="pre">repo_id</span></span><a class="headerlink" href="#bob_flux2.flux2_node.TTInode.repo_id" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bob_flux2.flux2_node.TTInode.model_dir">
<span class="sig-name descname"><span class="pre">model_dir</span></span><a class="headerlink" href="#bob_flux2.flux2_node.TTInode.model_dir" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bob_flux2.flux2_node.TTInode.device">
<span class="sig-name descname"><span class="pre">device</span></span><a class="headerlink" href="#bob_flux2.flux2_node.TTInode.device" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bob_flux2.flux2_node.TTInode.image_path">
<span class="sig-name descname"><span class="pre">image_path</span></span><a class="headerlink" href="#bob_flux2.flux2_node.TTInode.image_path" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bob_flux2.flux2_node.TTInode.prompt">
<span class="sig-name descname"><span class="pre">prompt</span></span><a class="headerlink" href="#bob_flux2.flux2_node.TTInode.prompt" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bob_flux2.flux2_node.TTInode.seed">
<span class="sig-name descname"><span class="pre">seed</span></span><a class="headerlink" href="#bob_flux2.flux2_node.TTInode.seed" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bob_flux2.flux2_node.TTInode.input_image">
<span class="sig-name descname"><span class="pre">input_image</span></span><a class="headerlink" href="#bob_flux2.flux2_node.TTInode.input_image" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bob_flux2.flux2_node.TTInode.once">
<span class="sig-name descname"><span class="pre">once</span></span><a class="headerlink" href="#bob_flux2.flux2_node.TTInode.once" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bob_flux2.flux2_node.TTInode.image_counter">
<span class="sig-name descname"><span class="pre">image_counter</span></span><a class="headerlink" href="#bob_flux2.flux2_node.TTInode.image_counter" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bob_flux2.flux2_node.TTInode.torch_dtype">
<span class="sig-name descname"><span class="pre">torch_dtype</span></span><a class="headerlink" href="#bob_flux2.flux2_node.TTInode.torch_dtype" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bob_flux2.flux2_node.TTInode.hf_kwargs">
<span class="sig-name descname"><span class="pre">hf_kwargs</span></span><a class="headerlink" href="#bob_flux2.flux2_node.TTInode.hf_kwargs" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bob_flux2.flux2_node.TTInode.subscription">
<span class="sig-name descname"><span class="pre">subscription</span></span><a class="headerlink" href="#bob_flux2.flux2_node.TTInode.subscription" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bob_flux2.flux2_node.TTInode.image_pub">
<span class="sig-name descname"><span class="pre">image_pub</span></span><a class="headerlink" href="#bob_flux2.flux2_node.TTInode.image_pub" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bob_flux2.flux2_node.TTInode._get_image_output_path">
<span class="sig-name descname"><span class="pre">_get_image_output_path</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#bob_flux2.flux2_node.TTInode._get_image_output_path" title="Link to this definition"></a></dt>
<dd><p>Determines the output path for the generated image.</p>
<p>If the ‘image_path’ parameter ends with “auto”, it generates a unique
filename with a random 10-character string in the specified directory.
Otherwise, it returns the ‘image_path’ parameter directly.</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>str: The final path to save the image file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bob_flux2.flux2_node.TTInode.prompt_callback">
<span class="sig-name descname"><span class="pre">prompt_callback</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bob_flux2.flux2_node.TTInode.prompt_callback" title="Link to this definition"></a></dt>
<dd><p>Processes an incoming prompt to generate and save an image.</p>
<p>This is the core callback function that executes the full text-to-image
pipeline in a memory-efficient manner. It performs the following steps:
1. Loads the text encoder model.
2. Encodes the incoming prompt string into tensor embeddings.
3. Unloads the text encoder to free VRAM.
4. Loads the image generation pipeline.
5. If an input image is specified, loads it.
6. Generates an image from the prompt embeddings (and optional input image).
7. Saves the image to the configured file path.
8. Unloads the image generation pipeline to free VRAM.
9. If the ‘once’ parameter is set, it shuts down the node.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>msg (std_msgs.msg.String): The message containing the text prompt.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="bob_flux2.flux2_node.main">
<span class="sig-prename descclassname"><span class="pre">bob_flux2.flux2_node.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bob_flux2.flux2_node.main" title="Link to this definition"></a></dt>
<dd><p>The main entry point for the ROS node.</p>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../index.html" class="btn btn-neutral float-left" title="bob_flux2" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../../bob_flux2k/index.html" class="btn btn-neutral float-right" title="bob_flux2k" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright BobRos.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>